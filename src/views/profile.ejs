<%- include("partials/header", { title: "Profile", nav: { isAuthed: true } }) %>

<div class="card" style="max-width:720px; margin: 18px auto;">
  <h2>Profile</h2>
  <p>Used for BMR and energy expenditure estimates.</p>

  <form method="POST" action="/profile">
    <div class="row">
      <div>
        <label>Sex</label>
        <select name="sex">
          <option value="" <%= !user.Sex ? "selected" : "" %> >Select</option>
          <option value="male" <%= user.Sex==="male" ? "selected" : "" %> >Male</option>
          <option value="female" <%= user.Sex==="female" ? "selected" : "" %> >Female</option>
        </select>
      </div>

      <div>
        <label>Age</label>
        <input type="number" name="age" value="<%= user.Age || "" %>" />
      </div>
    </div>

    <div style="height:12px"></div>

    <div class="row">
      <div>
        <label>Height (cm)</label>
        <input type="number" name="heightCm" value="<%= user.HeightCm || "" %>" />
      </div>

      <div>
        <label>Weight (kg)</label>
        <input type="number" step="0.1" name="weightKg" value="<%= user.WeightKg || "" %>" />
      </div>
    </div>

  <div class="card" style="margin-top:14px;">
  <h3>Nutrition Goals (Optional)</h3>
  <p class="helper"> Used to compare your diary against targets and show goal percentages.</p>

  <div class="row">
    <div>
      <label for="caloriesTarget">Calories (kcal/day)</label>
      <input id="caloriesTarget" name="caloriesTarget" type="number" min="0" step="1"
        value="<%= nutritionTargets?.calories ?? '' %>">
    </div>

    <div>
      <label for="proteinTarget">Protein (g/day)</label>
      <input id="proteinTarget" name="proteinTarget" type="number" min="0" step="0.1"
        value="<%= nutritionTargets?.protein ?? '' %>">
    </div>
  </div>

  <div class="row">
    <div>
      <label for="carbsTarget">Carbs (g/day)</label>
      <input id="carbsTarget" name="carbsTarget" type="number" min="0" step="0.1"
        value="<%= nutritionTargets?.carbs ?? '' %>">
    </div>

    <div>
      <label for="fatTarget">Fat (g/day)</label>
      <input id="fatTarget" name="fatTarget" type="number" min="0" step="0.1"
        value="<%= nutritionTargets?.fat ?? '' %>">
    </div>
  </div>
</div>

    <div class="actions">
      <button class="btn" type="submit">Save</button>
      <a class="btn btn-secondary" style="padding:10px 12px; border-radius:10px;" href="/dashboard">Back</a>

      <% if (updated) { %>
      <p style="margin: 10px;"success-msg">Profile updated âœ“</p>
      <% } %>

    </div>


</form>
</div>

<%- include("partials/footer") %>
